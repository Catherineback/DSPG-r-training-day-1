---
title: "R Practice"
output: html_document
date: '2022-06-02'
---

## Intro to Markdown
Markdown allows you to do things like **bold**, __italicize__, and more!
Make a list with asteriks like: 
* bold with double-asterisks

* italics with underscores

* code-type fond with backticks

You can also use hyphens instead of astericks.

For a numbered list:
1. bold...
2. italic...
3. code...

Hyperlinks are like [Hyperlined text](https://mylinks.org)

#Load gapminder data in along with plotting package

```{r load_data}
library(gapminder)
gap <- gapminder
plot(lifeExp ~ year, data=gap)

```

```{r}
temp <- c(1,2,3)

```
```{r make_cats}
cats <- data.frame(coat = c("calico", "black", "tabby"),
                   weight = c(2.1,5.0,3.2),
                   likes_string = c(1,0,1))
                   
write.csv(x = cats, file = "data/feline-data.csv", row.names=FALSE)
```

```{r read_cats}
cats2 <- read.csv('data/feline-data.csv', stringsAsFactors = T)
View(cats2)
```

Creating Vectors and Coercing Types
```{r}
my_vector <- vector(mode ='character',length = 3)
combine_vector <- c(1,2,'bananas')

```

change names
```{r}
names(cats)
names(cats)[3] <- "likes_hunting"
names(cats)
cats


```

Add Colums and Rows
```{r}

cats <- read.csv('data/feline-data.csv')
age <- c(2,3,5)
cats <- cbind(cats,age)
newRow <- list("tourtiseshell",3.3,TRUE,9)
cats <- rbind(cats,newRow)
```

Challenge

```{r}
human_age <- cats$age * 7
human_age <- as.factor(human_age)
human_age <- as.numeric(as.character(human_age))
human_age <- human_age/7


```


Remove Row and Columns
```{r}
#cats$coat <- as.factor(cats$coat)
#cats <- rbind(cats,c("white", 3.4,0,1))
#
#Remove a row

#cats <- cats[-5,]
#cats <- na.omit(cats)


cats <- read.csv('data/feline-data.csv')

drop <- names(cats) %in% c("weight")
#cats[,!drop]
```

```{r}
library(readxl)

gapminder <- read_excel("data/gapminder_data.xlsx")
summary(gapminder)
```
```{r}
summary(gapminder)
summary(gapminder$country)

gapminder$country <- factor(gapminder$country)
gapminder$continent <- factor(gapminder$continent)
summary(gapminder)

length(gapminder)
nrow(gapminder)

head(gapminder)

tail(gapminder)
gapminder[sample(nrow(gapminder), 10), ]
gapminder[1:10,2:5]


```

#Subsetting Data
```{r}
x <- c(5.4,6.2,7.1,4.8,7.5)
names(x) <- c('a','b','c','d','e')

x[c(1,3)] #discrete items
x[1:3] #slicing
x[c(1,1,3)]

x[-2]
x[c(-1,-5)]

x <- x[-4]
x[c("a","c")]

x[x > 7 & x < 7.5] #and
x[x > 7 | x < 7.5] #or


x2 <- 1:3
names(x2) <- c("a","a","a")
#x2("a") #duplicate names are possible but not advisable

x
names(x) != c("a", "c")
x[! names %in% c("a","c")]
```

Select Southeast Asian Countries from gapminder
```{r}

seAsia <- c("Myanmar", "Thailand", "Cambodia", "Vietman", "Laos")
SeAsia_gap<-gapminder[gapminder$country %in% seAsia,]

```
Extract observations from 1957
```{r}
gap_57 <- gapminder[gapminder$year>1956 | gapminder$year<1970,]
```


PICTURES!

```{r}
library("ggplot2")
ggplot(data =gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) + geom_point()
```

```{r}
library(ggplot2)
ggplot(data = gapminder, mapping = aes(x = year , y = lifeExp)) + geom_point() 
```

```{r}
ggplot(data=gapminder, mapping = aes(x=year, y = lifeExp, color = continent)) + geom_line()
```
Lines that make a little sense
```{r}
ggplot(data=gapminder, mapping = aes(x=year, y = lifeExp,by = country,)) + geom_line(mapping = aes(color = continent)) + geom_point(color = "dark blue")
```
```{r}
ggplot(gapminder,mapping = aes(x=gdpPercap, y=lifeExp)) + geom_point() +scale_x_log10() + geom_smooth(method = 'lm')
```

```{r}
logged_points + geom_smooth(method="lm")

logged_points <- 
```

```{r}
americas <- gapminder[gapminder$continent=="Americas",]
ggplot(data=americas, mapping = aes(x=year, y=lifeExp)) + geom_line() + facet_wrap( ~ country) + theme(axis.text.x = element_text(angle = 45))
ggsave(filename='results/lifeExp_americas.png')
```

Save Americas
```{r}
write.csv(file = 'Clean Data/americas_gap.csv', x = americas, row.names=F)
```

dplyr
```{r}
#tried but worst way to do it for mean of Africa
#mean(gapminder[gapminder$continent == "Africa", "gdpPercap"])
```
```{r}
library("dplyr")

year_country_gdp <- select(gapminder, year, country, gdpPercap)
str(year_country_gdp)
smaller_gap <- gapminder %>% select(-continent) %>% rename(gpd_per_capita = gdpPercap)
```
```{r}
y_cntr_gdp_eur <- gapminder%>%
  filter(continent=="Europe") %>%
  select(year,country,gdpPercap)
```

Combine with Grouping
```{r}
gapminder %>% group_by(continent, year) %>% 
  summarize(mean_gdpPercap = mean(gdpPercap), 
            sd_gdpPercap = sd(gdpPercap), 
            rawgdp = mean(gdpPercap*pop))
```

Mutate
```{r}
gapminder %>% mutate(gdp_billion = gdpPercap*pop/10^9) %>%
  group_by(continent,year) %>%
  summarize(mean_gdp_bill = mean(gdp_billion))
```

Combine with ggplot
```{r}
gapminder %>%
  filter(continent == "Americas") %>% 
  ggplot(mapping = aes(x=year, y= lifeExp)) + geom_line() + facet_wrap(~ country) 
```

